import camion.*
import cosas.*

describe "El Cami√≥n" {
    method initialize() {
        camion.cosas().clear()
    }
    
    test "Carga y Descarga" {
        camion.cargar(bumblebee)
        assert.equals(#{bumblebee}, camion.cosas())
        camion.cargar(knightRider)
        assert.equals(#{bumblebee, knightRider}, camion.cosas())
        camion.descargar(bumblebee)
        assert.equals(#{knightRider}, camion.cosas())
        assert.throwsException({camion.cargar(knightRider)})
        assert.throwsException({camion.descargar(bumblebee)})
    }
    test "Todo Peso Par" {
        camion.cargar(arenaGranel)
        arenaGranel.peso(50)
        camion.cargar(bumblebee)
        assert.that(camion.esTodoPesoPar())
        arenaGranel.peso(51)
        assert.notThat(camion.esTodoPesoPar())
    }
    test "Hay Algo Con Peso" {
        camion.cargar(bumblebee)
        camion.cargar(arenaGranel)
        arenaGranel.peso(50)
        assert.that(camion.hayAlgoConPeso(50))
        assert.that(camion.hayAlgoConPeso(800))
        assert.notThat(camion.hayAlgoConPeso(500))
    }
    test "Peso y Exceso de Peso" {
        camion.cargar(bumblebee)
        camion.cargar(paqueteLadrillos)
        paqueteLadrillos.cantidadLadrillos(300)
        assert.equals(2400, camion.pesoTotal())
        assert.notThat(camion.estaExcedidoDePeso())
        paqueteLadrillos.cantidadLadrillos(400)
        assert.equals(2600, camion.pesoTotal())
        assert.that(camion.estaExcedidoDePeso())
    }
}